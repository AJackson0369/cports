From 0443a0e184106f4e3bfc1d38cb2ce49c2ced3e0c Mon Sep 17 00:00:00 2001
From: Daniel Kolesa <daniel@octaforge.org>
Date: Tue, 7 Dec 2021 02:28:04 +0100
Subject: [PATCH] patch to support libedit

---
 meson.build        | 6 +-----
 src/tools/pw-cli.c | 3 +--
 2 files changed, 2 insertions(+), 7 deletions(-)

diff --git a/meson.build b/meson.build
index 718be7e..174d045 100644
--- a/meson.build
+++ b/meson.build
@@ -298,11 +298,7 @@ endif
 sdl_dep = dependency('sdl2', required : get_option('sdl2'))
 summary({'SDL 2': sdl_dep.found()}, bool_yn: true, section: 'Misc dependencies')
 drm_dep = dependency('libdrm', required : false)
-readline_dep = dependency('readline', required : false)
-
-if not readline_dep.found()
-  readline_dep = cc.find_library('readline', required: false)
-endif
+readline_dep = cc.find_library('edit', required: false)
 
 summary({'readline (for pw-cli)': readline_dep.found()}, bool_yn: true, section: 'Misc dependencies')
 ncurses_dep = dependency('ncursesw', required : false)
diff --git a/src/tools/pw-cli.c b/src/tools/pw-cli.c
index 37ec086..c6d6ad4 100644
--- a/src/tools/pw-cli.c
+++ b/src/tools/pw-cli.c
@@ -32,8 +32,7 @@
 #include <alloca.h>
 #endif
 #include <getopt.h>
-#include <readline/readline.h>
-#include <readline/history.h>
+#include <editline/readline.h>
 
 #define spa_debug(...) fprintf(stdout,__VA_ARGS__);fputc('\n', stdout)
 
-- 
2.34.1

