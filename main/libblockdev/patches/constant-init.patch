commit b3e9ca4b2768492d104810b8c9e97d6265e217ad
Author: q66 <q66@chimera-linux.org>
Date:   Fri Jun 30 05:08:22 2023 +0200

    work around invalid C (initializers must be constant)

diff --git a/src/plugins/fs/generic.c b/src/plugins/fs/generic.c
index b6a8a37..82a6579 100644
--- a/src/plugins/fs/generic.c
+++ b/src/plugins/fs/generic.c
@@ -182,121 +182,125 @@ static const BDFSInfo fs_info[BD_FS_LAST_FS] = {
     /* EXT2 */
     { .type = "ext2",
       .mkfs_util = "mkfs.ext2",
-      .mkfs_options = fs_features[BD_FS_TECH_EXT2].mkfs,
+      .mkfs_options = BD_FS_MKFS_LABEL | BD_FS_MKFS_UUID | BD_FS_MKFS_DRY_RUN | BD_FS_MKFS_NODISCARD |
+              BD_FS_MKFS_FORCE,
       .check_util = "e2fsck",
       .repair_util = "e2fsck",
       .resize_util = "resize2fs",
-      .resize_mode = fs_features[BD_FS_TECH_EXT2].resize,
+      .resize_mode = BD_FS_ONLINE_GROW | BD_FS_OFFLINE_GROW | BD_FS_OFFLINE_SHRINK,
       .label_util = "tune2fs",
       .info_util = "dumpe2fs",
       .uuid_util = "tune2fs" },
     /* EXT3 */
     { .type = "ext3",
       .mkfs_util = "mkfs.ext3",
-      .mkfs_options = fs_features[BD_FS_TECH_EXT3].mkfs,
+      .mkfs_options = BD_FS_MKFS_LABEL | BD_FS_MKFS_UUID | BD_FS_MKFS_DRY_RUN | BD_FS_MKFS_NODISCARD |
+              BD_FS_MKFS_FORCE,
       .check_util = "e2fsck",
       .repair_util = "e2fsck",
       .resize_util = "resize2fs",
-      .resize_mode = fs_features[BD_FS_TECH_EXT3].resize,
+      .resize_mode = BD_FS_ONLINE_GROW | BD_FS_OFFLINE_GROW | BD_FS_OFFLINE_SHRINK,
       .label_util = "tune2fs",
       .info_util = "dumpe2fs",
       .uuid_util = "tune2fs" },
     /* EXT4 */
     { .type = "ext4",
       .mkfs_util = "mkfs.ext4",
-      .mkfs_options = fs_features[BD_FS_TECH_EXT4].mkfs,
+      .mkfs_options = BD_FS_MKFS_LABEL | BD_FS_MKFS_UUID | BD_FS_MKFS_DRY_RUN | BD_FS_MKFS_NODISCARD |
+              BD_FS_MKFS_FORCE,
       .check_util = "e2fsck",
       .repair_util = "e2fsck",
       .resize_util = "resize2fs",
-      .resize_mode = fs_features[BD_FS_TECH_EXT4].resize,
+      .resize_mode = BD_FS_ONLINE_GROW | BD_FS_OFFLINE_GROW | BD_FS_OFFLINE_SHRINK,
       .label_util = "tune2fs",
       .info_util = "dumpe2fs",
       .uuid_util = "tune2fs" },
     /* XFS */
     { .type = "xfs",
       .mkfs_util = "mkfs.xfs",
-      .mkfs_options = fs_features[BD_FS_TECH_XFS].mkfs,
+      .mkfs_options = BD_FS_MKFS_LABEL | BD_FS_MKFS_UUID | BD_FS_MKFS_DRY_RUN | BD_FS_MKFS_NODISCARD |
+              BD_FS_MKFS_FORCE,
       .check_util = "xfs_db",
       .repair_util = "xfs_repair",
       .resize_util = "xfs_growfs",
-      .resize_mode = fs_features[BD_FS_TECH_XFS].resize,
+      .resize_mode = BD_FS_ONLINE_GROW | BD_FS_OFFLINE_GROW,
       .label_util = "xfs_admin",
       .info_util = "xfs_admin",
       .uuid_util = "xfs_admin" },
     /* VFAT */
     { .type = "vfat",
       .mkfs_util = "mkfs.vfat",
-      .mkfs_options = fs_features[BD_FS_TECH_VFAT].mkfs,
+      .mkfs_options = BD_FS_MKFS_LABEL | BD_FS_MKFS_UUID | BD_FS_MKFS_FORCE | BD_FS_MKFS_NOPT,
       .check_util = "fsck.vfat",
       .repair_util = "fsck.vfat",
       .resize_util = "vfat-resize",
-      .resize_mode = fs_features[BD_FS_TECH_VFAT].resize,
+      .resize_mode = BD_FS_OFFLINE_GROW | BD_FS_OFFLINE_SHRINK,
       .label_util = "fatlabel",
       .info_util = "fsck.vfat",
       .uuid_util = "fatlabel" },
     /* NTFS */
     { .type = "ntfs",
       .mkfs_util = "mkfs.ntfs",
-      .mkfs_options = fs_features[BD_FS_TECH_NTFS].mkfs,
+      .mkfs_options = BD_FS_MKFS_LABEL | BD_FS_MKFS_DRY_RUN,
       .check_util = "ntfsfix",
       .repair_util = "ntfsfix",
       .resize_util = "ntfsresize",
-      .resize_mode = fs_features[BD_FS_TECH_NTFS].resize,
+      .resize_mode = BD_FS_OFFLINE_GROW | BD_FS_OFFLINE_SHRINK,
       .label_util = "ntfslabel",
       .info_util = "ntfscluster",
       .uuid_util = "ntfslabel" },
     /* F2FS */
     { .type = "f2fs",
       .mkfs_util = "mkfs.f2fs",
-      .mkfs_options = fs_features[BD_FS_TECH_F2FS].mkfs,
+      .mkfs_options = BD_FS_MKFS_LABEL | BD_FS_MKFS_NODISCARD | BD_FS_MKFS_FORCE,
       .check_util = "fsck.f2fs",
       .repair_util = "fsck.f2fs",
       .resize_util = "resize.f2fs",
-      .resize_mode = fs_features[BD_FS_TECH_F2FS].resize,
+      .resize_mode = BD_FS_OFFLINE_GROW | BD_FS_OFFLINE_SHRINK,
       .label_util = NULL,
       .info_util = "dump.f2fs",
       .uuid_util = NULL },
     /* NILFS2 */
     { .type = "nilfs2",
       .mkfs_util = "mkfs.nilfs2",
-      .mkfs_options = fs_features[BD_FS_TECH_NILFS2].mkfs,
+      .mkfs_options = BD_FS_MKFS_LABEL | BD_FS_MKFS_DRY_RUN | BD_FS_MKFS_NODISCARD | BD_FS_MKFS_FORCE,
       .check_util = NULL,
       .repair_util = NULL,
       .resize_util = "nilfs-resize",
-      .resize_mode = fs_features[BD_FS_TECH_NILFS2].resize,
+      .resize_mode = BD_FS_ONLINE_GROW | BD_FS_ONLINE_SHRINK,
       .label_util = "nilfs-tune",
       .info_util = "nilfs-tune",
       .uuid_util = "nilfs-tune" },
     /* EXFAT */
     { .type = "exfat",
       .mkfs_util = "mkfs.exfat",
-      .mkfs_options = fs_features[BD_FS_TECH_EXFAT].mkfs,
+      .mkfs_options = BD_FS_MKFS_LABEL,
       .check_util = "fsck.exfat",
       .repair_util = "fsck.exfat",
       .resize_util = NULL,
-      .resize_mode = fs_features[BD_FS_TECH_EXFAT].resize,
+      .resize_mode = 0,
       .label_util = "tune.exfat",
       .info_util = "tune.exfat",
       .uuid_util = "tune.exfat" },
     /* BTRFS */
     { .type = "btrfs",
       .mkfs_util = "mkfs.btrfs",
-      .mkfs_options = fs_features[BD_FS_TECH_BTRFS].mkfs,
+      .mkfs_options = BD_FS_MKFS_LABEL | BD_FS_MKFS_UUID | BD_FS_MKFS_NODISCARD | BD_FS_MKFS_FORCE,
       .check_util = "btrfsck",
       .repair_util = "btrfsck",
       .resize_util = "btrfs",
-      .resize_mode = fs_features[BD_FS_TECH_BTRFS].resize,
+      .resize_mode = BD_FS_ONLINE_GROW | BD_FS_ONLINE_SHRINK,
       .label_util = "btrfs",
       .info_util = "btrfs",
       .uuid_util = "btrfstune" },
     /* UDF */
     { .type = "udf",
       .mkfs_util = "mkudffs",
-      .mkfs_options = fs_features[BD_FS_TECH_UDF].mkfs,
+      .mkfs_options = BD_FS_MKFS_LABEL | BD_FS_MKFS_UUID,
       .check_util = NULL,
       .repair_util = NULL,
       .resize_util = NULL,
-      .resize_mode = fs_features[BD_FS_TECH_UDF].resize,
+      .resize_mode = 0,
       .label_util = "udflabel",
       .info_util = "udfinfo",
       .uuid_util = "udflabel" },
