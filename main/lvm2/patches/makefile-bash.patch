commit 74cd1379e9271d127f1e99733fde1d884e28674e
Author: Daniel Kolesa <daniel@octaforge.org>
Date:   Tue Nov 15 01:05:38 2022 +0100

    kill bashisms in makefiles

diff --git a/include/Makefile.in b/include/Makefile.in
index 88a06a9..f2211cb 100644
--- a/include/Makefile.in
+++ b/include/Makefile.in
@@ -20,7 +20,7 @@ include $(top_builddir)/make.tmpl
 
 cmds.h:
 	@echo "    [GEN] $@"
-	$(Q) set -o pipefail && \
+	$(Q) \
 	( cat $(top_srcdir)/tools/license.inc && \
 	  echo "/* Do not edit. This file is generated by the Makefile. */" && \
 	  echo "cmd(CMD_NONE, none)" && \
diff --git a/tools/Makefile.in b/tools/Makefile.in
index 49d9b89..a6e2291 100644
--- a/tools/Makefile.in
+++ b/tools/Makefile.in
@@ -168,21 +168,21 @@ liblvm2cmd.$(LIB_SUFFIX).$(LIB_VERSION): liblvm2cmd.$(LIB_SUFFIX)
 
 command-count.h: $(srcdir)/command-lines.in Makefile
 	@echo "    [GEN] $@"
-	$(Q) set -o pipefail && \
+	$(Q) \
 	( cat $(top_srcdir)/tools/license.inc && \
 	  echo "/* Do not edit. This file is generated by the Makefile. */" && \
-	  echo -n "#define COMMAND_COUNT " && \
+	  printf "#define COMMAND_COUNT " && \
 	  $(GREP) '^ID:' $< | $(WC) -l \
 	) > $@
 
 command-lines-input.h: $(srcdir)/command-lines.in Makefile
 	@echo "    [GEN] $@"
-	$(Q) set -o pipefail && \
+	$(Q) \
 	( cat $(srcdir)/license.inc && \
 	  echo "/* Do not edit. This file is generated by the Makefile. */" && \
-	  echo -en "static const char _command_input[] =\n\n\"" && \
+	  printf "static const char _command_input[] =\n\n\"" && \
 	  $(EGREP) -v '^#|\-\-\-|^$$' $(srcdir)/command-lines.in | $(AWK) 'BEGIN {ORS = "\\n\"\n\""} //' && \
-	  echo "\\n\\n\";" \
+	  printf "\\\n\\\n\";\n" \
 	) > $@
 
 $(SOURCES:%.c=%.d) $(SOURCES2:%.c=%.d): command-lines-input.h command-count.h
