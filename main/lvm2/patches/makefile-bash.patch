commit 1fc7e90dd1704f1a6f8995e3f5149a14b6afff77
Author: Daniel Kolesa <daniel@octaforge.org>
Date:   Fri Nov 26 03:19:31 2021 +0100

    kill bashisms in makefiles

diff --git a/tools/Makefile.in b/tools/Makefile.in
index e0e1804..0cfbf3e 100644
--- a/tools/Makefile.in
+++ b/tools/Makefile.in
@@ -168,16 +168,16 @@ liblvm2cmd.$(LIB_SUFFIX).$(LIB_VERSION): liblvm2cmd.$(LIB_SUFFIX)
 
 command-count.h: $(srcdir)/command-lines.in Makefile
 	@echo "    [GEN] $@"
-	$(Q) set -o pipefail && \
+	$(Q) \
 	( cat $(top_srcdir)/tools/license.inc && \
 	  echo "/* Do not edit. This file is generated by the Makefile. */" && \
-	  echo -n "#define COMMAND_COUNT " && \
+	  printf "#define COMMAND_COUNT " && \
 	  $(GREP) '^ID:' $< | $(WC) -l \
 	) > $@
 
 cmds.h: $(srcdir)/command-lines.in Makefile
 	@echo "    [GEN] $@"
-	$(Q) set -o pipefail && \
+	$(Q) \
 	( cat $(srcdir)/license.inc && \
 	  echo "/* Do not edit. This file is generated by the Makefile. */" && \
 	  echo "cmd(CMD_NONE, none)" && \
@@ -187,12 +187,12 @@ cmds.h: $(srcdir)/command-lines.in Makefile
 
 command-lines-input.h: $(srcdir)/command-lines.in Makefile
 	@echo "    [GEN] $@"
-	$(Q) set -o pipefail && \
+	$(Q) \
 	( cat $(srcdir)/license.inc && \
 	  echo "/* Do not edit. This file is generated by the Makefile. */" && \
-	  echo -en "const char _command_input[] =\n\n\"" && \
+	  printf "const char _command_input[] =\n\n\"" && \
 	  $(EGREP) -v '^#|\-\-\-|^$$' $(srcdir)/command-lines.in | $(AWK) 'BEGIN {ORS = "\\n\"\n\""} //' && \
-	  echo "\\n\";" \
+	  printf "\\\n\";\n" \
 	) > $@
 
 $(SOURCES:%.c=%.d) $(SOURCES2:%.c=%.d): command-lines-input.h command-count.h cmds.h
