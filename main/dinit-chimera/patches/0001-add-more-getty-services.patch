From d8fac9cd55b5da80c8d1a7a826902f2050c96962 Mon Sep 17 00:00:00 2001
From: Daniel Kolesa <daniel@octaforge.org>
Date: Sat, 12 Feb 2022 06:56:43 +0100
Subject: [PATCH] add more getty services

---
 Makefile                | 9 +++++++++
 services/agetty-console | 8 ++++++++
 services/agetty-hvc0    | 4 ++--
 services/agetty-hvsi0   | 8 ++++++++
 services/agetty-tty2    | 2 +-
 services/agetty-tty3    | 8 ++++++++
 services/agetty-tty4    | 8 ++++++++
 services/agetty-tty5    | 8 ++++++++
 services/agetty-tty6    | 8 ++++++++
 services/agetty-ttyAMA0 | 8 ++++++++
 services/agetty-ttyS0   | 8 ++++++++
 services/agetty-ttyUSB0 | 8 ++++++++
 12 files changed, 84 insertions(+), 3 deletions(-)
 create mode 100644 services/agetty-console
 create mode 100644 services/agetty-hvsi0
 create mode 100644 services/agetty-tty3
 create mode 100644 services/agetty-tty4
 create mode 100644 services/agetty-tty5
 create mode 100644 services/agetty-tty6
 create mode 100644 services/agetty-ttyAMA0
 create mode 100644 services/agetty-ttyS0
 create mode 100644 services/agetty-ttyUSB0

diff --git a/Makefile b/Makefile
index 19311c9..964ede8 100644
--- a/Makefile
+++ b/Makefile
@@ -43,9 +43,18 @@ SYSTEM_SERVICES = \
 	single
 
 SERVICES = \
+	agetty-console \
 	agetty-hvc0 \
+	agetty-hvsi0 \
 	agetty-tty1 \
 	agetty-tty2 \
+	agetty-tty3 \
+	agetty-tty4 \
+	agetty-tty5 \
+	agetty-tty6 \
+	agetty-ttyAMA0 \
+	agetty-ttyS0 \
+	agetty-ttyUSB0 \
 	late-filesystems
 
 EARLY_SCRIPTS = \
diff --git a/services/agetty-console b/services/agetty-console
new file mode 100644
index 0000000..34f6ef5
--- /dev/null
+++ b/services/agetty-console
@@ -0,0 +1,8 @@
+type            = process
+command         = /usr/bin/agetty console 38400 linux
+restart         = true
+depends-on      = login
+termsignal      = HUP
+smooth-recovery = true
+inittab-id      = console
+inittab-line    = console
diff --git a/services/agetty-hvc0 b/services/agetty-hvc0
index 8dc4155..84bf704 100644
--- a/services/agetty-hvc0
+++ b/services/agetty-hvc0
@@ -1,8 +1,8 @@
 type            = process
-command         = /usr/bin/agetty -L --noclear hvc0 9600 vt100
+command         = /usr/bin/agetty -L hvc0 9600 vt100
 restart         = true
 depends-on      = login
 termsignal      = HUP
 smooth-recovery = true
-inittab-id      = 13
+inittab-id      = hvc0
 inittab-line    = hvc0
diff --git a/services/agetty-hvsi0 b/services/agetty-hvsi0
new file mode 100644
index 0000000..0eb0c70
--- /dev/null
+++ b/services/agetty-hvsi0
@@ -0,0 +1,8 @@
+type            = process
+command         = /usr/bin/agetty -L -8 hvsi0 19200 vt100
+restart         = true
+depends-on      = login
+termsignal      = HUP
+smooth-recovery = true
+inittab-id      = hvsi0
+inittab-line    = hvsi0
diff --git a/services/agetty-tty2 b/services/agetty-tty2
index 5bca3fa..8bbe13f 100644
--- a/services/agetty-tty2
+++ b/services/agetty-tty2
@@ -4,5 +4,5 @@ restart         = true
 depends-on      = login
 termsignal      = HUP
 smooth-recovery = true
-inittab-id      = 1
+inittab-id      = 2
 inittab-line    = tty2
diff --git a/services/agetty-tty3 b/services/agetty-tty3
new file mode 100644
index 0000000..703055a
--- /dev/null
+++ b/services/agetty-tty3
@@ -0,0 +1,8 @@
+type            = process
+command         = /usr/bin/agetty tty3 38400 linux
+restart         = true
+depends-on      = login
+termsignal      = HUP
+smooth-recovery = true
+inittab-id      = 3
+inittab-line    = tty3
diff --git a/services/agetty-tty4 b/services/agetty-tty4
new file mode 100644
index 0000000..d06c3a7
--- /dev/null
+++ b/services/agetty-tty4
@@ -0,0 +1,8 @@
+type            = process
+command         = /usr/bin/agetty tty4 38400 linux
+restart         = true
+depends-on      = login
+termsignal      = HUP
+smooth-recovery = true
+inittab-id      = 4
+inittab-line    = tty4
diff --git a/services/agetty-tty5 b/services/agetty-tty5
new file mode 100644
index 0000000..1dd6ab4
--- /dev/null
+++ b/services/agetty-tty5
@@ -0,0 +1,8 @@
+type            = process
+command         = /usr/bin/agetty tty5 38400 linux
+restart         = true
+depends-on      = login
+termsignal      = HUP
+smooth-recovery = true
+inittab-id      = 5
+inittab-line    = tty5
diff --git a/services/agetty-tty6 b/services/agetty-tty6
new file mode 100644
index 0000000..7dadc0b
--- /dev/null
+++ b/services/agetty-tty6
@@ -0,0 +1,8 @@
+type            = process
+command         = /usr/bin/agetty tty6 38400 linux
+restart         = true
+depends-on      = login
+termsignal      = HUP
+smooth-recovery = true
+inittab-id      = 6
+inittab-line    = tty6
diff --git a/services/agetty-ttyAMA0 b/services/agetty-ttyAMA0
new file mode 100644
index 0000000..bb7abca
--- /dev/null
+++ b/services/agetty-ttyAMA0
@@ -0,0 +1,8 @@
+type            = process
+command         = /usr/bin/agetty -L -8 ttyAMA0 115200 vt100
+restart         = true
+depends-on      = login
+termsignal      = HUP
+smooth-recovery = true
+inittab-id      = AMA0
+inittab-line    = ttyAMA0
diff --git a/services/agetty-ttyS0 b/services/agetty-ttyS0
new file mode 100644
index 0000000..ac55cb5
--- /dev/null
+++ b/services/agetty-ttyS0
@@ -0,0 +1,8 @@
+type            = process
+command         = /usr/bin/agetty -L -8 ttyS0 115200 vt100
+restart         = true
+depends-on      = login
+termsignal      = HUP
+smooth-recovery = true
+inittab-id      = S0
+inittab-line    = ttyS0
diff --git a/services/agetty-ttyUSB0 b/services/agetty-ttyUSB0
new file mode 100644
index 0000000..82c6d0c
--- /dev/null
+++ b/services/agetty-ttyUSB0
@@ -0,0 +1,8 @@
+type            = process
+command         = /usr/bin/agetty -L -8 ttyUSB0 115200 vt100
+restart         = true
+depends-on      = login
+termsignal      = HUP
+smooth-recovery = true
+inittab-id      = USB0
+inittab-line    = ttyUSB0
-- 
2.35.0

