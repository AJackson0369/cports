From 80638fbc6b8c1afc370c8fefa9f1d410f79f15c4 Mon Sep 17 00:00:00 2001
From: Daniel Kolesa <daniel@octaforge.org>
Date: Thu, 25 Nov 2021 03:54:29 +0100
Subject: [PATCH] portable install(1) use

---
 util/install_helper.sh | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

diff --git a/util/install_helper.sh b/util/install_helper.sh
index cb649a7..d89f194 100755
--- a/util/install_helper.sh
+++ b/util/install_helper.sh
@@ -23,7 +23,8 @@ else
     DESTDIR="${DESTDIR%/}"
 fi
 
-install -D -m 644 "${MESON_SOURCE_ROOT}/util/fuse.conf" \
+install -d -m 755 "${DESTDIR}${sysconfdir}"
+install -m 644 "${MESON_SOURCE_ROOT}/util/fuse.conf" \
 	"${DESTDIR}${sysconfdir}/fuse.conf"
 
 if $useroot; then
@@ -36,10 +37,12 @@ if $useroot; then
     fi
 fi
 
-install -D -m 644 "${MESON_SOURCE_ROOT}/util/udev.rules" \
+install -d -m 755 "${DESTDIR}${udevrulesdir}"
+install -m 644 "${MESON_SOURCE_ROOT}/util/udev.rules" \
         "${DESTDIR}${udevrulesdir}/99-fuse3.rules"
 
-install -D -m 755 "${MESON_SOURCE_ROOT}/util/init_script" \
+install -d -m 755 "${DESTDIR}/etc/init.d"
+install -m 755 "${MESON_SOURCE_ROOT}/util/init_script" \
         "${DESTDIR}/etc/init.d/fuse3"
 
 
-- 
2.34.0

